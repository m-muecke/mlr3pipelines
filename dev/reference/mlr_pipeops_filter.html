<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Feature filtering using a mlr3filters::Filter object, see the
mlr3filters package.
If a Filter can only operate on a subset of columns based on column type, then only these features are considered and filtered.
nfeat and frac will count for the features of the type that the Filter can operate on;
this means e.g. that setting nfeat to 0 will only remove features of the type that the Filter can work with."><title>Feature Filtering — mlr_pipeops_filter • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Feature Filtering — mlr_pipeops_filter"><meta property="og:description" content="Feature filtering using a mlr3filters::Filter object, see the
mlr3filters package.
If a Filter can only operate on a subset of columns based on column type, then only these features are considered and filtered.
nfeat and frac will count for the features of the type that the Filter can operate on;
this means e.g. that setting nfeat to 0 will only remove features of the type that the Filter can work with."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.0-9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Feature Filtering</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/HEAD/R/PipeOpFilter.R" class="external-link"><code>R/PipeOpFilter.R</code></a></small>
      <div class="d-none name"><code>mlr_pipeops_filter.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Feature filtering using a <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">mlr3filters::Filter</a></code> object, see the
<a href="https://CRAN.R-project.org/package=mlr3filters" class="external-link"><span class="pkg">mlr3filters</span></a> package.</p>
<p>If a <code>Filter</code> can only operate on a subset of columns based on column type, then only these features are considered and filtered.
<code>nfeat</code> and <code>frac</code> will count for the features of the type that the <code>Filter</code> can operate on;
this means e.g. that setting <code>nfeat</code> to 0 will only remove features of the type that the <code>Filter</code> can work with.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><code>R6Class</code> object inheriting from <code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="construction">Construction<a class="anchor" aria-label="anchor" href="#construction"></a></h2>
    


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>PipeOpFilter<span class="sc">$</span><span class="fu">new</span>(filter, <span class="at">id =</span> filter<span class="sc">$</span>id, <span class="at">param_vals =</span> <span class="fu">list</span>())</span></code></pre><p></p></div><ul><li><p><code>filter</code> :: <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code><br><code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> used for feature filtering.
This argument is always cloned; to access the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> inside <code>PipeOpFilter</code> by-reference, use <code>$filter</code>.<br></p></li>
<li><p><code>id</code> :: <code>character(1)</code>
Identifier of the resulting  object, defaulting to the <code>id</code> of the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> being used.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-and-output-channels">Input and Output Channels<a class="anchor" aria-label="anchor" href="#input-and-output-channels"></a></h2>
    

<p>Input and output channels are inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>.</p>
<p>The output is the input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> with features removed that were filtered out.</p>
    </div>
    <div class="section level2">
    <h2 id="state">State<a class="anchor" aria-label="anchor" href="#state"></a></h2>
    

<p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as:</p><ul><li><p><code>scores</code> :: named <code>numeric</code><br>
Scores calculated for all features of the training <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> which are being used
as cutoff for feature filtering. If <code>frac</code> or <code>nfeat</code> is given, the underlying <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> may choose to not calculate scores for
all features that are given. This only includes features on which the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can operate; e.g.
if the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can only operate on numeric features, then scores for factorial features will not be given.</p></li>
<li><p><code>features</code> :: <code>character</code><br>
Names of features that are being kept. Features of types that the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can not operate on are always being kept.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>
    

<p>The parameters are the parameters inherited from the <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as the parameters of the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code>
used by this object. Besides, parameters introduced are:</p><ul><li><p><code>filter.nfeat</code> :: <code>numeric(1)</code> <br>
Number of features to select.
Mutually exclusive with <code>frac</code>, <code>cutoff</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.frac</code> :: <code>numeric(1)</code> <br>
Fraction of features to keep.
Mutually exclusive with <code>nfeat</code>, <code>cutoff</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.cutoff</code> :: <code>numeric(1)</code> <br>
Minimum value of filter heuristic for which to keep features.
Mutually exclusive with <code>nfeat</code>, <code>frac</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.permuted</code> :: <code>integer(1)</code> <br>
If this parameter is set, a random permutation of each feature is added to the task before
applying the filter. All features selected before the <code>permuted</code>-th permuted features is selected
are kept. This is similar to the approach in Wu (2007) and Thomas (2017).
Mutually exclusive with <code>nfeat</code>, <code>frac</code>, and <code>cutoff</code>.</p></li>
</ul><p>Note that at least one of <code>filter.nfeat</code>, <code>filter.frac</code>, <code>filter.cutoff</code>, and <code>filter.permuted</code> must be given.</p>
    </div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>
    

<p>This does <em>not</em> use the <code>$.select_cols</code> feature of <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code> to select only features compatible with the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code>;
instead the whole <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> is used by <code>private$.get_state()</code> and subset internally.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>
    

<p>Fields inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as:</p><ul><li><p><code>filter</code> :: <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code><br><code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> that is being used for feature filtering. Do <em>not</em> use this slot to get to the feature filtering scores
after training; instead, use <code>$state$scores</code>. Read-only.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    

<p>Methods inherited from <code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Wu Y, Boos DD, Stefanski LA (2007).
“Controlling Variable Selection by the Addition of Pseudovariables.”
<em>Journal of the American Statistical Association</em>, <b>102</b>(477), 235--243.
<a href="https://doi.org/10.1198/016214506000000843" class="external-link">doi:10.1198/016214506000000843</a>
.</p>
<p>Thomas J, Hepp T, Mayr A, Bischl B (2017).
“Probing for Sparse and Fast Variable Selection with Model-Based Boosting.”
<em>Computational and Mathematical Methods in Medicine</em>, <b>2017</b>, 1--8.
<a href="https://doi.org/10.1155/2017/1421409" class="external-link">doi:10.1155/2017/1421409</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>https://mlr-org.com/pipeops.html</p>
<p>Other PipeOps: 
<code><a href="PipeOpEnsemble.html">PipeOpEnsemble</a></code>,
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>,
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="mlr_pipeops_boxcox.html">mlr_pipeops_boxcox</a></code>,
<code><a href="mlr_pipeops_branch.html">mlr_pipeops_branch</a></code>,
<code><a href="mlr_pipeops_chunk.html">mlr_pipeops_chunk</a></code>,
<code><a href="mlr_pipeops_classbalancing.html">mlr_pipeops_classbalancing</a></code>,
<code><a href="mlr_pipeops_classifavg.html">mlr_pipeops_classifavg</a></code>,
<code><a href="mlr_pipeops_classweights.html">mlr_pipeops_classweights</a></code>,
<code><a href="mlr_pipeops_colapply.html">mlr_pipeops_colapply</a></code>,
<code><a href="mlr_pipeops_collapsefactors.html">mlr_pipeops_collapsefactors</a></code>,
<code><a href="mlr_pipeops_colroles.html">mlr_pipeops_colroles</a></code>,
<code><a href="mlr_pipeops_copy.html">mlr_pipeops_copy</a></code>,
<code><a href="mlr_pipeops_datefeatures.html">mlr_pipeops_datefeatures</a></code>,
<code><a href="mlr_pipeops_encodeimpact.html">mlr_pipeops_encodeimpact</a></code>,
<code><a href="mlr_pipeops_encodelmer.html">mlr_pipeops_encodelmer</a></code>,
<code><a href="mlr_pipeops_encode.html">mlr_pipeops_encode</a></code>,
<code><a href="mlr_pipeops_featureunion.html">mlr_pipeops_featureunion</a></code>,
<code><a href="mlr_pipeops_fixfactors.html">mlr_pipeops_fixfactors</a></code>,
<code><a href="mlr_pipeops_histbin.html">mlr_pipeops_histbin</a></code>,
<code><a href="mlr_pipeops_ica.html">mlr_pipeops_ica</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputeoor.html">mlr_pipeops_imputeoor</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code>,
<code><a href="mlr_pipeops_kernelpca.html">mlr_pipeops_kernelpca</a></code>,
<code><a href="mlr_pipeops_learner.html">mlr_pipeops_learner</a></code>,
<code><a href="mlr_pipeops_missind.html">mlr_pipeops_missind</a></code>,
<code><a href="mlr_pipeops_modelmatrix.html">mlr_pipeops_modelmatrix</a></code>,
<code><a href="mlr_pipeops_multiplicityexply.html">mlr_pipeops_multiplicityexply</a></code>,
<code><a href="mlr_pipeops_multiplicityimply.html">mlr_pipeops_multiplicityimply</a></code>,
<code><a href="mlr_pipeops_mutate.html">mlr_pipeops_mutate</a></code>,
<code><a href="mlr_pipeops_nmf.html">mlr_pipeops_nmf</a></code>,
<code><a href="mlr_pipeops_nop.html">mlr_pipeops_nop</a></code>,
<code><a href="mlr_pipeops_ovrsplit.html">mlr_pipeops_ovrsplit</a></code>,
<code><a href="mlr_pipeops_ovrunite.html">mlr_pipeops_ovrunite</a></code>,
<code><a href="mlr_pipeops_pca.html">mlr_pipeops_pca</a></code>,
<code><a href="mlr_pipeops_proxy.html">mlr_pipeops_proxy</a></code>,
<code><a href="mlr_pipeops_quantilebin.html">mlr_pipeops_quantilebin</a></code>,
<code><a href="mlr_pipeops_randomprojection.html">mlr_pipeops_randomprojection</a></code>,
<code><a href="mlr_pipeops_randomresponse.html">mlr_pipeops_randomresponse</a></code>,
<code><a href="mlr_pipeops_regravg.html">mlr_pipeops_regravg</a></code>,
<code><a href="mlr_pipeops_removeconstants.html">mlr_pipeops_removeconstants</a></code>,
<code><a href="mlr_pipeops_renamecolumns.html">mlr_pipeops_renamecolumns</a></code>,
<code><a href="mlr_pipeops_replicate.html">mlr_pipeops_replicate</a></code>,
<code><a href="mlr_pipeops_scalemaxabs.html">mlr_pipeops_scalemaxabs</a></code>,
<code><a href="mlr_pipeops_scalerange.html">mlr_pipeops_scalerange</a></code>,
<code><a href="mlr_pipeops_scale.html">mlr_pipeops_scale</a></code>,
<code><a href="mlr_pipeops_select.html">mlr_pipeops_select</a></code>,
<code><a href="mlr_pipeops_smote.html">mlr_pipeops_smote</a></code>,
<code><a href="mlr_pipeops_spatialsign.html">mlr_pipeops_spatialsign</a></code>,
<code><a href="mlr_pipeops_subsample.html">mlr_pipeops_subsample</a></code>,
<code><a href="mlr_pipeops_targetinvert.html">mlr_pipeops_targetinvert</a></code>,
<code><a href="mlr_pipeops_targetmutate.html">mlr_pipeops_targetmutate</a></code>,
<code><a href="mlr_pipeops_targettrafoscalerange.html">mlr_pipeops_targettrafoscalerange</a></code>,
<code><a href="mlr_pipeops_textvectorizer.html">mlr_pipeops_textvectorizer</a></code>,
<code><a href="mlr_pipeops_threshold.html">mlr_pipeops_threshold</a></code>,
<code><a href="mlr_pipeops_tunethreshold.html">mlr_pipeops_tunethreshold</a></code>,
<code><a href="mlr_pipeops_unbranch.html">mlr_pipeops_unbranch</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code>,
<code><a href="mlr_pipeops_vtreat.html">mlr_pipeops_vtreat</a></code>,
<code><a href="mlr_pipeops_yeojohnson.html">mlr_pipeops_yeojohnson</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3.mlr-org.com" class="external-link">"mlr3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3filters.mlr-org.com" class="external-link">"mlr3filters"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/openmp-utils.html" class="external-link">setDTthreads</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># setup PipeOpFilter to keep the 5 most important</span></span></span>
<span class="r-in"><span><span class="co"># features of the spam task w.r.t. their AUC</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"spam"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">filter</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3filters.mlr-org.com/reference/flt.html" class="external-link">flt</a></span><span class="op">(</span><span class="st">"auc"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">po</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"filter"</span>, filter <span class="op">=</span> <span class="va">filter</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">po</span><span class="op">$</span><span class="va">param_set</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ParamSetCollection:auc&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 id    class lower upper nlevels</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:    filter.nfeat ParamInt     0   Inf     Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     filter.frac ParamDbl     0     1     Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   filter.cutoff ParamDbl  -Inf   Inf     Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: filter.permuted ParamInt     1   Inf     Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  affect_columns ParamUty    NA    NA     Inf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                      default</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                       &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: &lt;NoDefault&gt;\n  Public:\n    clone: function (deep = FALSE) \n    initialize: function () </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: &lt;NoDefault&gt;\n  Public:\n    clone: function (deep = FALSE) \n    initialize: function () </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: &lt;NoDefault&gt;\n  Public:\n    clone: function (deep = FALSE) \n    initialize: function () </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: &lt;NoDefault&gt;\n  Public:\n    clone: function (deep = FALSE) \n    initialize: function () </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                                                                             &lt;Selector[1]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:       </span>
<span class="r-in"><span><span class="va">po</span><span class="op">$</span><span class="va">param_set</span><span class="op">$</span><span class="va">values</span><span class="op">$</span><span class="va">filter.nfeat</span> <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filter the task</span></span></span>
<span class="r-in"><span><span class="va">filtered_task</span> <span class="op">=</span> <span class="va">po</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filtered task + extracted AUC scores</span></span></span>
<span class="r-in"><span><span class="va">filtered_task</span><span class="op">$</span><span class="va">feature_names</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "capitalAve"      "capitalLong"     "charDollar"      "charExclamation"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "your"           </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">po</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">scores</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> charExclamation     capitalLong      capitalAve            your      charDollar </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.3290461       0.3041626       0.2882004       0.2801659       0.2721394 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    capitalTotal            free             our             you          remove </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.2622801       0.2327285       0.2109325       0.2104681       0.2031303 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># feature selection embedded in a 3-fold cross validation</span></span></span>
<span class="r-in"><span><span class="co"># keep 30% of features based on their AUC score</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"spam"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"filter"</span>, filter <span class="op">=</span> <span class="fu"><a href="https://mlr3filters.mlr-org.com/reference/flt.html" class="external-link">flt</a></span><span class="op">(</span><span class="st">"auc"</span><span class="op">)</span>, filter.frac <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"learner"</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">learner</span> <span class="op">=</span> <span class="va"><a href="mlr_learners_graph.html">GraphLearner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">gr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">learner</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="va">learners</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">model</span><span class="op">$</span><span class="va">auc</span><span class="op">$</span><span class="va">scores</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   charExclamation       capitalLong        capitalAve              your </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      3.290018e-01      3.084719e-01      2.924356e-01      2.850997e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        charDollar      capitalTotal              free               you </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2.760477e-01      2.690304e-01      2.328002e-01      2.133331e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               our            remove             money               all </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2.127344e-01      2.049659e-01      1.848303e-01      1.800999e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                hp            num000          business              over </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1.768315e-01      1.592152e-01      1.529875e-01      1.490547e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              mail          internet               hpl            george </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1.395390e-01      1.362281e-01      1.362075e-01      1.341867e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             email           receive           address             order </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1.316039e-01      1.303801e-01      1.246968e-01      1.142778e-01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              make           num1999          charHash            credit </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1.090133e-01      1.049933e-01      1.024926e-01      9.926152e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              will            people              labs         addresses </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      9.423281e-02      9.040350e-02      7.689188e-02      7.541491e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            num650             num85               edu               lab </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      6.979414e-02      6.939648e-02      6.787860e-02      6.004967e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        technology            telnet           meeting              data </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      5.498094e-02      5.137943e-02      4.946566e-02      4.597672e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pm            report           project            num857 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      3.984151e-02      3.941819e-02      3.742082e-02      3.490039e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> charSquarebracket            num415          original        conference </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      3.485239e-02      3.285303e-02      2.864972e-02      2.808021e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                cs                re              font     charSemicolon </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      2.658932e-02      2.658113e-02      2.309021e-02      2.247249e-02 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  charRoundbracket            direct             num3d             table </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      1.810618e-02      1.206585e-02      9.208792e-03      2.783626e-03 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             parts </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      5.883081e-05 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

